%!TEX root = paper.tex
\section{Preliminaries and Requirements}
\Aron{Redundant, previous and following paragraphs state what we do here anyway.}
This section describes the basic components of a transactive IoT
microgrid and formulates security, safety, and privacy requirements.

\subsection{Transactive Microgrid Components}
\Abhishek{We need a figure here. We probably need to briefly describe a transactive energy architecture and then use that to set the requirements. The services described here will then better  fit in our section on solution }

\Abhishek{This is the perfect paragraph to define transactive microgrid as a special application of IoT spread over a large area. Perhaps we can find a citation that makes this point.}
We begin by describing a basic system model of decentralized 
\Doug{Abhishek, if there's room can we add a diagram showing how all these components relate to each other?} 
transactive IoT microgrids.  We discuss the following components: a
distributed ledger for recording transactions, a bid storage service
that facilitates finding trade partners, a microgrid controller for
regulating the microgrid load, and smart meters for measuring the
prosumers' energy production and consumption.

\subsubsection{Distributed Ledger}
This ledger permanently stores transactions that specify energy
trades, change regulatory policies for the microgrid, etc.  For
providing security and safety, it is crucial that transactions are
immutable, \emph{i.e.}, after a transaction has been recorded, it
cannot be modified or removed from the ledger.  To enhance fault
tolerance, however, the ledger should also be distributed.

Since a distributed ledger is maintained by multiple nodes, a key
requirement is reaching consensus on which transactions are valid and
stored on the ledger.  Moreover, this consensus must be reached
quickly and reliably, even in the presence of faulty or malicious
(\emph{e.g.}, compromised) ledger nodes.  This paper assumes that a
distributed ledger service is available, but makes no assumptions
about the ledger implementation, such as the particulars of the
consensus algorithm.  In practice, a distributed ledger can be
implemented using, \emph{e.g.}, \emph{blockchains} with proof-of-stake
consensus or a practical Byzantine fault tolerance
algorithm~\cite{castro1999practical}.

\subsubsection{Bid Storage Service}
Although prosumers trade energy with each other directly (\emph{i.e.},
without a middleman), for the sake of scalability, we need a service
that enables prosumers to find trade partners.
%A bid storage service receives energy buy and sell bids from prosumers, stores these 
We assume that there is a bid storage service that allows prosumers to
post and read energy \emph{bids} and \emph{asks}.\footnote{A
  \emph{bid} is an offer to buy at a certain price, while an
  \emph{ask} is an offer to sell at a certain price.}  This service
relieves prosumers from contacting a large number of potential trade
partners since they only communicate with the service to discover
trade partners.
%Moreover, in addition to simply storing bids and asks, the service may also find matches in the posted bids and asks, and it may notify the posting prosumers of the trade opportunity.
To enhance scalability and reliability, this service can also be
implemented in a distributed manner, using multiple nodes.

\subsubsection{Microgrid Controller (Distribution System Operator)}
\Aron{Is this true?}\Abhishek{I have editied it. We need to mention distribution system operator here.}
We assume the existence of a controller at the Distribution System Operator level that regulates the total load that the microgrid should present to the distribution system.
%The microgrid controller stabilizes the load within the microgrid
%based on the predicted future load within the microgrid and the rest
%of the grid. 
 The controller first predicts load in the microgrid
based on (1) bids and asks in the bid storage and (2) outstanding
energy trades in the ledger.  By combining this information with the
prediction for the rest of the grid, the controller produces a control
signal that specifies how much the microgrid load should be decreased
or increased.  Based on this signal, the controller then updates the
price policy for the microgrid to influence energy production and
consumption.  We also assume the presence of a secondary controller
that balances voltage and frequency in the microgrid.

\subsubsection{Smart Meters}
To measure the prosumers' energy production and consumption, a smart
meter must be deployed at each prosumer.  In practice, these smart
meters must be tamper resistant to prevent prosumers from ``stealing
electricity'' by tampering with their meters.  After a smart meter has
measured the net amount of energy consumed by the prosumer in some
time interval, it can send this information to the DSO for billing
purposes.

\subsection{Requirements}
We now discuss the security, safety, and privacy requirements that
must be satisfied by a transactive energy IoT system.

\subsubsection{Security}
Security requirements ensure primarily that prosumers are billed
correctly, but they also provide necessary prerequisite properties for
safety.
%Prosumers (or outside attackers) should not be able to tamper with measured energy production and consumption values, with financial balances, with other prosumers' bids.
More specifically, they require that
\begin{itemize}[noitemsep,topsep=-\parskip]
\item prosumers are billed correctly based on the energy prices set by
  the DSO, their energy trades, and their actual energy production and
  consumption measured by the smart meters,
% (i.e., prosumers or outside attackers cannot tamper with energy production, consumption, and financial balances) % attackers cannot tamper with energy production and consumption balances or financial balances),
\item prosumers or outside attackers cannot change microgrid
  regulatory policies that are set by the DSO, 
\item prosumers cannot back out of trades unilaterally, and they
  cannot tamper with other prosumers' trading or bidding,
\item financial and physical impact of compromised or faulty nodes is
  limited, and nodes can be banned by the DSO. 
\end{itemize}

\subsubsection{Safety}
A careless or malicious prosumer may destabilize the grid by promising
to produce (or consume) a large amount of energy, but failing to actually
produce (or consume) it.  A significant difference between promised and
actual energy production (or consumption) can result in a large gap
between the aggregate production and consumption of the microgrid.
A large gap threatens the stability of not only the microgrid but also the main
power grid.  Therefore, prosumers should not be able to trade large
amounts of energy that they are unlikely to deliver.
%Trades which are unlikely to be delivered and would result in a gap between actual production and demand should be prevented.
Specifically, we require that 
\begin{itemize}[noitemsep,topsep=-\parskip]
\item the net amount of energy sold (or bought) by a prosumer is upper
  bounded (by an amount set by the DSO), where the net amount of
  energy sold is the difference between the amount of energy sold and
  bought by the prosumer, and the net amount of energy bought is
  defined analogously,
\item the energy bids and asks posted by a prosumer are limited in a
  similar way.
\end{itemize}

\subsubsection{Privacy} 
Privacy requirements ensure that the prosumers' privacy is not
compromised when they participate in energy trading.  We use
non-transactive smart metering as a baseline, and we require that
the transactive system does not leak any additional information
compared to this baseline.  More specifically, we require that
\begin{itemize}[noitemsep,topsep=-\parskip]
\item only the corresponding smart meter and the DSO may gain
  information regarding the amount of energy produced, consumed,
  bought, or sold by a prosumer,\footnote{Note that this requirement
    is impossible to satisfy if all other prosumers may collude
    against one target. However, we can assume that the majority of
    prosumers are non-colluding.}
\item only the prosumer may know which bids and asks it has posted,
  and no one can know who traded energy with whom.
\end{itemize}


