install geth

`cd <>/transactive-blockchain-iccps/standalone-demo`

update 

setup docker volume and copy geth config files
https://docs.docker.com/storage/volumes/
Volumes are the preferred mechanism for persisting data generated by and used by Docker containers
New users should try --mount syntax which is simpler than --volume syntax.

`sudo docker container create --name dummy -v transaxdata:/root hello-world`
`sudo docker cp <path-to-repo>/transactive-blockchain/geth-config/ dummy:/root/geth-config`
  
optional check: 
`sudo docker inspect transaxdata`

Setup new geth account
create a new account

If using volumes(recommended)
``sudo docker run \
 --mount type=volume,src="transaxdata",target=/data \
  -it \
  -p 30303:30303 \
  ethereum/client-go account new --password /data/geth-config/password.txt --datadir /data/eth/ ``

If using bind-mount
``sudo docker run \
 --mount type=bind,source="~/projects/transactive-blockchain/geth-config",target=geth-config \
 --mount type=bind,source="~/projects/transactive-blockchain/eth",target=/eth \
  -it \
  -p 30303:30303 \
  ethereum/client-go account new --password geth-config/password.txt --datadir /eth ``
  
  
 Run geth miner node
  
``--datadir /data/eth`` specifies the data directory of the geth node. Required if running multiple nodes locally. 
``--ethash.dagdir /data/Ethash`` so we don't have to regenerate the dag everytime we srart
``--networkid 15`` selects which network to use. Replace 15 with any non-negative number other than 1,2,3 or 4 since those are mainnets. 
``--nousb`` gets rid of error message by disabling USB wallet support
``--nodiscover`` don't look for peers
``--mine --minerthreads=1 --miner.etherbase=0`` make this instance a miner
``--targetgaslimit 200000000000000000`` set high limit to make sure no contract function calls fail

``sudo docker run \
  --mount type=volume,src="transaxdata",target=/data \
  -it -p 30303:30303 \
  ethereum/client-go --datadir /data/eth --ethash.dagdir /data/Ethash \
  --http --http.port 10000 --networkid 15 --nousb --nodiscover \
  --mine --miner.threads=1 --miner.etherbase=0 \
  --miner.gastarget 200000000000000000 \
  --password /data/geth-config/password.txt \
  console``
  
  --testnet \
  
 check if miner is accumulating ether  
`web3.fromWei(eth.getBalance(eth.accounts[0]))`

check existing accounts
`eth.accounts`









In order to run multiple ethereum nodes locally, you have to make sure:

    each instance has a separate data directory (--datadir)
    each instance runs on a different port (both eth and rpc) (--port and --rpcport)
    in case of a cluster the instances must know about each other
    the ipc endpoint is unique or the ipc interface is disabled (--ipcpath or --ipcdisable)





